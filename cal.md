---
layout: page
permalink: /cal/
title: cal
comment: actual calendar is autogenerated, see `_data/cal.json`
---

<style>

.header {
  margin: 0 0 1em 0;
  padding: 1em;
  background-color: #EEEEEE;
}

.item {
  padding: 0 1em 1em 1em;
}

.due {
  font-weight: bold;
}

h2, ul {
  margin-bottom: 0
}

.topic, .assigned, .due, .materials, .vid {
  padding-left: 2em;
}

</style>

**This schedule will change as we calibrate the first few weeks of the course.**   
**Note: some links will be blank until they're assigned/uploaded.**

<div id="cal">
</div>

<script>
var cal_data = {{ site.data.cal | jsonify }};

var cal_div = d3.select('#cal');

cal_div.selectAll('.event')
  .data(cal_data)
  .enter().append('div')
  .attr('class', 'event')
  .html( render_event )

function render_event(d, i, A) {
  var s = '';
  if (d.weekly_header)
    s += '<div class="header">' + render_header(d.weekly_header) + '</div>';
  if (d.weekly_reading)
    s += '<div class="item">' + render_reading(d.weekly_reading, true) + '</div>';
  if (d.weekly_suggested)
    s += '<div class="item">' + render_reading(d.weekly_suggested, false) + '</div>';
  if (d.day)
      s += '<div class="item">' + render_day(d.day, d.date) + '</div>';
  if (d.notes)
      s += '<div class="item">' + render_notes(d.notes) + '</div>';
  return s;
}

function render_header(header) {
  var s = '<h2 class="header-title">' + header + '</h2>';
  return s;
}

function render_reading(readings, required) {
  s = required ? '<div>Reading:</div><ul>' : '<div>Suggested Reading:</div><ul>';
  readings.forEach(function(reading) {
    s += '<li>' + reading_link(reading) + '</li>';
  })
  s += '</ul>';
  return s;
}

function render_day(day, date) {
  var s = '<div class="date">' + date_rejigger(date) + '</div>';
  if(day.topic)
    s += '<div class="topic">Topic: ' + day.topic + '</div>';
  if(day.lab)
    s += '<div class="topic">Lab: ' + lab_link(day.lab) + '</div>';
  if(day.assigned)
    day.assigned.forEach(function(assignment) {
      s += '<div class="assigned">Assigned: ' + assigned_str(assignment) + '</div>';
    });
  if(day.due)
    s += '<div class="due">Due: ' + day.due + '</div>';
  if(day.materials)
    s += '<div class="materials">' + materials_link(day.materials) + '</div>';
  if(day.vid)
    s += '<div class="vid">' + vid_link(day.vid) + '</div>';
  return s;
}

function render_notes(notes) {
  var s = '';
  notes.forEach(function(note) {
    s += '<div class="note">' + note + '</div>';
  });
  return s;
}

function reading_link(d) {
  var s = '';
  if(d.link != "")
    s += '<a href="' + d.link + '" target="_blank">' + d.text + '</a>'
  else
    s += d.text
  return s;
}

function lab_link(d) {
  var s = '';
  s += '<a href="' + d.link + '">' + d.text + '</a>';
  return s;
}

function materials_link(d) {
  var s = '';
  s += '<a href="/' + d + '">materials</a>';
  return s;
}

function vid_link(d) {
  var s = '';
  s += '<a href="' + d + '">vid</a>';
  return s;
}

function assigned_str(d) {
var s = '';
if(d.link != "")
  s += '<a href="' + d.link + '">' + d.text + '</a>';
else
  s += d.text;
return s;
}

function date_rejigger(d) {
  var s = moment(d, "DD-MMM-YYYY");
  return s.format('DD-MMM ddd');
}

</script>
